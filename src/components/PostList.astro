---
import './latest/PostTiles.css';
import type { Post } from "../layouts/post/postLayout";

import { getRelativeLocaleUrl } from 'astro:i18n';
import { languages } from "../i18n/ui";
import { useTranslations } from "../i18n/lang-utils";

const { posts } = Astro.props as { posts: Post[]; }
const lang = Astro.currentLocale as keyof typeof languages;
const t = useTranslations(lang);
---
<section>
  <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; ">
    <h2>{t('blog.all-posts')}</h2>
    <a href={getRelativeLocaleUrl(lang, '/')}  title={t('blog.switch-to-grid')}>
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed">
        <path d="M120-520v-320h320v320H120Zm0 400v-320h320v320H120Zm400-400v-320h320v320H520Zm0 400v-320h320v320H520ZM200-600h160v-160H200v160Zm400 0h160v-160H600v160Zm0 400h160v-160H600v160Zm-400 0h160v-160H200v160Zm400-400Zm0 240Zm-240 0Zm0-240Z"/>
      </svg>
    </a>
  </div>
  <ul>
    {
      posts.map(post => (
        <li>
          <a href={getRelativeLocaleUrl(lang, `/blog/${post.slug}`)}>
            <span transition:name={'publishedAt_' + post.slug}> {post.data.publishedAt.toLocaleDateString()}</span>
            &nbsp;
            <span transition:name={'title_' + post.slug}> {post.data.title}</span>
          </a>
        </li>
      ))
    }
  </ul>
</section>
